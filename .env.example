# remuXcode Configuration
# Copy this file to .env and fill in your values

# Sonarr Configuration
SONARR_URL=http://localhost:8989
SONARR_API_KEY=your_sonarr_api_key_here

# Radarr Configuration
RADARR_URL=http://localhost:7878
RADARR_API_KEY=your_radarr_api_key_here

# Webhook Service Configuration
# Port the webhook service listens on
REMUXCODE_PORT=7889

# Host interface to bind to (0.0.0.0 = all interfaces)
REMUXCODE_HOST=0.0.0.0

# Path Mappings (container path -> host path)
# REQUIRED when running as host service: Maps Sonarr/Radarr container paths to host filesystem
# Supports multiple volumes - add as many as needed with sequential numbering
# The system tries longest paths first, so /share-exp/4k will match before /share-exp
PATH_MAPPING_1_CONTAINER=/container/path
PATH_MAPPING_1_HOST=/host/path
# PATH_MAPPING_2_CONTAINER=/another/container/path
# PATH_MAPPING_2_HOST=/another/host/path

# API Key (optional but recommended)
# Set to require X-API-Key header for all requests (except /health)
# Generate with: openssl rand -hex 32
# Leave empty to disable authentication (not recommended for production)
# Also accepts legacy names: MEDIA_API_KEY, DTS_WEBHOOK_API_KEY (backwards compatible)
REMUXCODE_API_KEY=

# Worker Count (optional)
# Number of concurrent video conversion jobs
# Each job is CPU-intensive (HEVC encoding with FFmpeg)
# Recommended: 1 to prevent CPU overload
# Higher values (2-4) only if you have a powerful CPU and want faster batch processing
# REMUXCODE_WORKERS=1

# Temporary Directory (optional - advanced override)
# By default, temp files are created on the SAME VOLUME as source files for instant renames.
# This avoids expensive cross-volume data copies (e.g., 10GB file copy vs instant inode update).
# Only set this if you want ALL temp files in a specific location (not recommended).
# Pattern used: {volume_root}/.remuxcode-temp-{job_id}/ (auto-detected from PATH_MAPPING)
# TEMP_DIR=/tmp

# Log Level (optional)
# Options: DEBUG, INFO, WARNING, ERROR
# LOG_LEVEL=INFO

# Audio Codec Preferences
# Use EAC3 instead of AC3 for 5.1 audio (better compression, requires modern devices)
# Options: true, false (default: false for maximum compatibility)
# USE_EAC3_FOR_51=false

# Keep original DTS audio track when converting (regular DTS-HD MA, DTS-ES, etc.)
# When true: Adds converted track as default, keeps original DTS as secondary
# When false: Replaces DTS track with converted track (saves space)
# Options: true, false (default: false)
# KEEP_ORIGINAL_DTS=false

# DTS:X Handling (object-based audio)
# DTS:X contains spatial metadata that is LOST when converting to channel-based AAC.
# By default, DTS:X streams are kept untouched (no conversion).

# Convert DTS:X to 7.1 AAC (loses object metadata)
# When false: DTS:X is kept as-is (no conversion, no extra track added)
# When true: DTS:X is converted to 7.1 AAC for compatibility
# Options: true, false (default: false)
# CONVERT_DTS_X=false

# Keep original DTS:X track when converting
# NOTE: This setting is IGNORED if CONVERT_DTS_X=false
# Only applies when CONVERT_DTS_X=true
# When true: Keeps original DTS:X + adds converted 7.1 AAC (compatible default)
# When false: Replaces DTS:X with 7.1 AAC (saves space, loses object metadata permanently)
# Options: true, false (default: false)
# KEEP_ORIGINAL_DTS_X=false

# =============================================================================
# Processing Control - Enable/Disable Individual Components
# =============================================================================
# Control what processing is performed on media files
# Set to false to skip that processing step entirely

# Video Encoding (H.264 -> HEVC/AV1 conversion)
# VIDEO_ENCODING_ENABLED=true

# Video Codec Preference (hevc or av1)
# HEVC: Better device compatibility, hardware decoding support
# AV1: Better compression, future-proof, slower encoding
# VIDEO_CODEC=hevc

# Anime Only Mode (only convert anime, skip live action)
# ANIME_ONLY=true

# Audio Conversion (DTS/TrueHD -> AC3/AAC conversion)
# AUDIO_CONVERSION_ENABLED=true

# Stream Cleanup (enable/disable stream cleanup entirely)
# STREAM_CLEANUP_ENABLED=true

# Audio Stream Cleanup (remove unwanted language audio tracks)
# AUDIO_CLEANUP_ENABLED=true

# Subtitle Stream Cleanup (remove unwanted language subtitles)
# SUBTITLE_CLEANUP_ENABLED=true

# =============================================================================
# remuXcode - Advanced Configuration
# =============================================================================
# These settings override the YAML config (backend/config.yaml) when set.
# Most users should configure via YAML instead.

# Config file path (default: ./backend/config.yaml)
# REMUXCODE_CONFIG_PATH=/path/to/config.yaml

# Port and host (also configurable above as REMUXCODE_PORT/REMUXCODE_HOST)
# REMUXCODE_PORT=7889
# REMUXCODE_HOST=0.0.0.0

# API Key (configured above as REMUXCODE_API_KEY)
